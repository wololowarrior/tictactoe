{"map":"{\"version\":3,\"file\":\"session.js\",\"sourceRoot\":\"\",\"sources\":[\"../../session.ts\"],\"names\":[],\"mappings\":\"AA6BA,MAAM,OAAO,OAAO;IAClB,YACW,KAAa,EACb,UAAkB,EAClB,UAAkB,EAClB,QAAgB,EAChB,OAAe,EACf,IAAY;QALZ,UAAK,GAAL,KAAK,CAAQ;QACb,eAAU,GAAV,UAAU,CAAQ;QAClB,eAAU,GAAV,UAAU,CAAQ;QAClB,aAAQ,GAAR,QAAQ,CAAQ;QAChB,YAAO,GAAP,OAAO,CAAQ;QACf,SAAI,GAAJ,IAAI,CAAQ;IACvB,CAAC;IAED,SAAS,CAAC,WAAmB;QAC3B,OAAO,CAAC,IAAI,CAAC,UAAU,GAAG,WAAW,CAAC,GAAG,CAAC,CAAC;IAC7C,CAAC;IAED,MAAM,CAAC,OAAO,CAAC,GAAW;QACxB,MAAM,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,IAAI,EAAE,CAAC,OAAO,EAAE,GAAG,IAAI,CAAC,CAAC;QAC1D,MAAM,KAAK,GAAG,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;QAC7B,IAAI,KAAK,CAAC,MAAM,IAAI,CAAC,EAAE;YACrB,MAAM,mBAAmB,CAAC;SAC3B;QACD,MAAM,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAC3C,MAAM,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;QAEvD,OAAO,IAAI,OAAO,CAAC,GAAG,EAAE,SAAS,EAAE,SAAS,EAAE,OAAO,CAAC,KAAK,CAAC,EAAE,OAAO,CAAC,KAAK,CAAC,EAAE,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC;IAChG,CAAC;CACF\"}","code":"export class Session {\r\n    constructor(token, created_at, expires_at, username, user_id, vars) {\r\n        this.token = token;\r\n        this.created_at = created_at;\r\n        this.expires_at = expires_at;\r\n        this.username = username;\r\n        this.user_id = user_id;\r\n        this.vars = vars;\r\n    }\r\n    isexpired(currenttime) {\r\n        return (this.expires_at - currenttime) < 0;\r\n    }\r\n    static restore(jwt) {\r\n        const createdAt = Math.floor(new Date().getTime() / 1000);\r\n        const parts = jwt.split('.');\r\n        if (parts.length != 3) {\r\n            throw 'jwt is not valid.';\r\n        }\r\n        const decoded = JSON.parse(atob(parts[1]));\r\n        const expiresAt = Math.floor(parseInt(decoded['exp']));\r\n        return new Session(jwt, createdAt, expiresAt, decoded['usn'], decoded['uid'], decoded['vrs']);\r\n    }\r\n}\r\n//# sourceMappingURL=session.js.map","dts":{"name":"/Users/lugehorsam/nakama-js/packages/nakama-js/.rpt2_cache/placeholder/session.d.ts","writeByteOrderMark":false,"text":"export interface ISession {\r\n    readonly token: string;\r\n    readonly created_at: number;\r\n    readonly expires_at: number;\r\n    readonly username: string;\r\n    readonly user_id: string;\r\n    readonly vars: object;\r\n    isexpired(currenttime: number): boolean;\r\n}\r\nexport declare class Session {\r\n    readonly token: string;\r\n    readonly created_at: number;\r\n    readonly expires_at: number;\r\n    readonly username: string;\r\n    readonly user_id: string;\r\n    readonly vars: object;\r\n    constructor(token: string, created_at: number, expires_at: number, username: string, user_id: string, vars: object);\r\n    isexpired(currenttime: number): boolean;\r\n    static restore(jwt: string): Session;\r\n}\r\n"}}
